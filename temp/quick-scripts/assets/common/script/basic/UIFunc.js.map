{"version":3,"sources":["UIFunc.js"],"names":["window","uiFunc","uiList","cacheUIList","openUI","uiName","callBack","i","length","temp","name","active","parent","cc","Canvas","instance","node","push","splice","panel","getComponent","show","clientEvent","dispatch","eventType","loader","loadRes","err","prefab","error","message","instantiate","closeUI","removeFromParent","hide","findUI"],"mappings":"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","file":"UIFunc.js","sourceRoot":"../../../../../../assets/common/script/basic","sourcesContent":["/*\n    create by hao.c 2018/04/10\n\n    desc: 游戏显示相关操作逻辑\n */\n\nwindow.uiFunc = {\n    uiList: [],\n    cacheUIList: []\n};\n\nuiFunc.openUI = function(uiName, callBack) {\n    // 缓存--\n    for (var i = 0; i < uiFunc.cacheUIList.length; i++) {\n        var temp = uiFunc.cacheUIList[i];\n        if (temp && temp.name === uiName) {\n            temp.active = true;\n            temp.parent = cc.Canvas.instance.node;\n            uiFunc.uiList.push(temp)\n            uiFunc.cacheUIList.splice(i, 1);\n\n            var panel = temp.getComponent(\"uiPanel\");\n            if (panel) {\n                panel.show();\n            }\n\n            // event--\n            if (callBack) {\n                callBack(temp);\n            }\n            clientEvent.dispatch(clientEvent.eventType.openUI);\n            return;\n        }\n    }\n    // 非缓存--\n    cc.loader.loadRes('ui/' + uiName, function(err, prefab) {\n        if (err) {\n            cc.error(err.message || err);\n            return;\n        }\n\n        var temp = cc.instantiate(prefab);\n        temp.parent = cc.Canvas.instance.node;\n        uiFunc.uiList.push(temp)\n\n        var panel = temp.getComponent(\"uiPanel\");\n        if (panel) {\n            panel.show();\n        }\n\n        // event--\n        if (callBack) {\n            callBack(temp);\n        }\n        clientEvent.dispatch(clientEvent.eventType.openUI);\n    });\n};\n\nuiFunc.closeUI = function(uiName, callBack) {\n    for (var i = uiFunc.uiList.length - 1; i >= 0; i--) {\n        var temp = uiFunc.uiList[i];\n        if (temp && temp.name === uiName) {\n            temp.active = false;\n            temp.removeFromParent(true);\n            uiFunc.cacheUIList.push(temp);\n            uiFunc.uiList.splice(i, 1);\n\n            var panel = temp.getComponent(\"uiPanel\");\n            if (panel) {\n                panel.hide();\n            }\n\n            clientEvent.dispatch(clientEvent.eventType.closeUI);\n            if (callBack) {\n                callBack();\n            }\n            return;\n        }\n    }\n}\n\nuiFunc.findUI = function(uiName) {\n    for (var i = uiFunc.uiList.length - 1; i >= 0; i--) {\n        var temp = uiFunc.uiList[i];\n        if (temp && temp.name === uiName) {\n            return temp;\n        }\n    }\n}\n"]}