{"version":3,"sources":["uiPanel.js"],"names":["PanelAnimation","cc","Enum","None","ScaleAndAlpha","Class","extends","Component","properties","showAnimation","default","type","hideAnimation","isUseMask","onLoad","nodeDict","linkWidget","self","children","i","length","widgetName","name","indexOf","nodeName","substring","error","childrenCount","bind","node","anim","getComponent","Animation","addComponent","on","showCompleted","show","active","clipName","addClip","dataFunc","uiPanelAnimationClips","play","console","log","hide","clientEvent","clear","onDestroy","off"],"mappings":"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","file":"uiPanel.js","sourceRoot":"../../../../../../assets/common/script/basic","sourcesContent":["var PanelAnimation = cc.Enum({\n    None: -1,\n    ScaleAndAlpha: -1\n});\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        showAnimation: {\n            default: PanelAnimation.None,\n            type: PanelAnimation\n        },\n        hideAnimation: {\n            default: PanelAnimation.None,\n            type: PanelAnimation\n        },\n        isUseMask: false\n    },\n\n    onLoad: function() {\n        // node load --\n        this.nodeDict = {};\n\n        var linkWidget = function(self, nodeDict) {\n            var children = self.children;\n            for (var i = 0; i < children.length; i++) {\n                var widgetName = children[i].name;\n                if (widgetName && widgetName.indexOf(\"key_\") >= 0) {\n                    var nodeName = widgetName.substring(4);\n                    if (nodeDict[nodeName]) {\n                        cc.error(\"控件名字重复!\" + children[i].name);\n                    }\n                    nodeDict[nodeName] = children[i];\n                }\n                if (children[i].childrenCount > 0) {\n                    linkWidget(children[i], nodeDict);\n                }\n            }\n        }.bind(this);\n        linkWidget(this.node, this.nodeDict);\n\n        // 添加动画--\n        if (!this.showAnimation || !this.hideAnimation) {\n            this.anim = this.getComponent(cc.Animation);\n            if (!this.anim) {\n                this.anim = this.addComponent(cc.Animation);\n            }\n            this.anim.on('finished', this.showCompleted, this);\n        }\n    },\n\n    show: function() {\n        if (this.showAnimation === PanelAnimation.None) {\n            this.node.active = true;\n        } else {\n            var clipName = PanelAnimation[this.showAnimation];\n            this.anim.addClip(dataFunc.uiPanelAnimationClips[clipName]);\n            this.anim.play(clipName);\n        }\n    },\n\n    showCompleted: function() {\n        console.log(this.node.name + \"动画播放完毕～\");\n    },\n\n    hide: function() {\n        if (this.hideAnimation === PanelAnimation.None) {\n            this.node.active = false;\n        } else {\n            var clipName = PanelAnimation[this.hideAnimation];\n            this.anim.addClip(dataFunc.uiPanelAnimationClips[clipName]);\n            this.anim.play(clipName);\n        }\n        // 解除事件绑定--\n        clientEvent.clear(this);\n    },\n\n    onDestroy: function() {\n        if (this.anim) {\n            this.anim.off('finished', this.showCompleted, this);\n        }\n    },\n});\n"]}